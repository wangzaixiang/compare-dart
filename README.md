# 编程语言性能对比

本项目通过多个算法测试案例，对比 C、Swift、Go、Dart、Java、Zig、Rust、Python、Lua、JavaScript 等编程语言的性能差异。

## 测试语言
- C (GCC/Clang)
- Swift
- Go
- Dart (JIT/AOT)
- Java (JVM/GraalVM)
- Zig
- Rust
- Python (CPython/PyPy)
- Lua/LuaJIT
- JavaScript (Node.js/Bun)

## 测试案例
- **Fibonacci 递归**: 计算 fib(42)，测试递归性能
- **冒泡排序**: 对100万随机整数排序，测试循环和数组操作性能
- **素数筛法**: 找出2亿以内所有素数，测试数学计算和内存操作
- **快速排序**: 排序100万随机整数，测试高效算法实现
- **矩阵乘法**: 计算两个50x50矩阵乘积，测试数值计算性能
- **二叉树遍历**: 遍历深度为20的完全二叉树，测试递归和内存访问
- **计数排序**: 对2亿个随机数进行计数排序，测试大内存操作
- **汉诺塔**: 解决20层汉诺塔问题，测试递归算法
- **曼德勃罗集**: 计算复数运算生成分形图形，测试浮点运算

## 可选依赖

### GraalVM Native Image
如需测试 Java GraalVM Native Image 性能，请安装 GraalVM：

```bash
# macOS (使用 Homebrew)
brew install --cask graalvm/tap/graalvm-jdk17

# 设置环境变量
export PATH="/Library/Java/JavaVirtualMachines/graalvm-jdk-17/Contents/Home/bin:$PATH"
export JAVA_HOME="/Library/Java/JavaVirtualMachines/graalvm-jdk-17/Contents/Home"

# 安装 native-image 工具
gu install native-image
```

## 📊 综合性能测试结果

### 🏃‍♂️ Fibonacci 递归性能排名

| 语言 | 时间 (ms) | 性能排名 | 相对性能 |
|------|-----------|----------|----------|
| Java (JVM) | 846 | 🥇 最快 | 100% |
| C (Clang) | 977 | 🥈 第二 | 115.5% |
| Zig | 980 | 🥉 第三 | 115.8% |
| C (GCC) | 982 | 4️⃣ 第四 | 116.1% |
| Rust | 989 | 5️⃣ 第五 | 116.9% |
| Go | 1065 | 6️⃣ 第六 | 125.9% |
| Java (GraalVM) | 1225 | 7️⃣ 第七 | 144.8% |
| Swift | 1250 | 8️⃣ 第八 | 147.8% |
| JavaScript (Bun) | 1621 | 9️⃣ 第九 | 191.6% |
| Dart (AOT) | 1723 | 🔟 第十 | 203.7% |
| Lua (LuaJIT) | 2449 | 1️⃣1️⃣ | 289.5% |
| JavaScript (Node.js) | 3051 | 1️⃣2️⃣ | 360.8% |
| Dart (JIT) | 4188 | 1️⃣3️⃣ | 495.0% |
| Python (PyPy) | 7618 | 1️⃣4️⃣ | 900.5% |

### 🔄 冒泡排序性能排名

| 语言 | 时间 (ms) | 性能排名 | 相对性能 |
|------|-----------|----------|----------|
| Rust | 1114 | 🥇 最快 | 100% |
| Java (JVM) | 1158 | 🥈 第二 | 103.9% |
| C (GCC/Clang) | 1166 | 🥉 第三 | 104.7% |
| Go | 1167 | 4️⃣ 第四 | 104.8% |
| Zig | 1170 | 5️⃣ 第五 | 105.0% |
| Java (GraalVM) | 1217 | 6️⃣ 第六 | 109.2% |
| Swift | 1326 | 7️⃣ 第七 | 119.0% |
| Dart (JIT) | 1661 | 8️⃣ 第八 | 149.1% |
| Dart (AOT) | 1900 | 9️⃣ 第九 | 170.6% |
| Python (PyPy) | 2218 | 🔟 第十 | 199.1% |
| Lua (LuaJIT) | 2228 | 1️⃣1️⃣ | 200.0% |
| JavaScript (Bun) | 2265 | 1️⃣2️⃣ | 203.3% |
| JavaScript (Node.js) | 2618 | 1️⃣3️⃣ | 235.0% |

### 🔍 素数筛法性能排名

| 语言 | 时间 (ms) | 性能排名 | 相对性能 |
|------|-----------|----------|----------|
| Go | 934 | 🥇 最快 | 100% |
| Rust | 1096 | 🥈 第二 | 117.3% |
| C (GCC) | 1189 | 🥉 第三 | 127.3% |
| Java (JVM) | 1355 | 4️⃣ 第四 | 145.1% |
| Java (GraalVM) | 1394 | 5️⃣ 第五 | 149.2% |
| Zig | 1394 | 6️⃣ 第六 | 149.2% |
| C (Clang) | 1597 | 7️⃣ 第七 | 171.0% |
| Swift | 1883 | 8️⃣ 第八 | 201.6% |
| Dart (AOT) | 2767 | 9️⃣ 第九 | 296.3% |
| JavaScript (Bun) | 3804 | 🔟 第十 | 407.3% |
| Python (PyPy) | 4120 | 1️⃣1️⃣ | 441.1% |
| Dart (JIT) | 5435 | 1️⃣2️⃣ | 582.0% |
| Lua (LuaJIT) | 54526 | 1️⃣3️⃣ | 5838.8% |

### 🚄 快速排序性能排名

| 语言 | 时间 (ms) | 性能排名 | 相对性能 |
|------|-----------|----------|----------|
| C (Clang) | 522 | 🥇 最快 | 100% |
| C (GCC) | 524 | 🥈 第二 | 100.4% |
| Zig | 540 | 🥉 第三 | 103.4% |
| Rust | 674 | 4️⃣ 第四 | 129.1% |
| Go | 709 | 5️⃣ 第五 | 135.8% |
| Java (JVM) | 863 | 6️⃣ 第六 | 165.3% |
| Swift | 888 | 7️⃣ 第七 | 170.1% |
| Java (GraalVM) | 1002 | 8️⃣ 第八 | 192.0% |
| Dart (JIT) | 1087 | 9️⃣ 第九 | 208.2% |
| JavaScript (Bun) | 1178 | 🔟 第十 | 225.7% |
| JavaScript (Node.js) | 1211 | 1️⃣1️⃣ | 232.0% |
| Dart (AOT) | 1237 | 1️⃣2️⃣ | 237.0% |
| Lua (LuaJIT) | 3138 | 1️⃣3️⃣ | 601.1% |
| Python (PyPy) | 5169 | 1️⃣4️⃣ | 990.4% |

### 🔢 矩阵乘法性能排名

| 语言 | 时间 (ms) | 性能排名 | 相对性能 |
|------|-----------|----------|----------|
| C (Clang) | 201 | 🥇 最快 | 100% |
| C (GCC) | 209 | 🥈 第二 | 104.0% |
| Java (GraalVM) | 218 | 🥉 第三 | 108.5% |
| Java (JVM) | 244 | 4️⃣ 第四 | 121.4% |
| JavaScript (Bun) | 625 | 5️⃣ 第五 | 311.0% |
| Swift | 635 | 6️⃣ 第六 | 316.0% |
| Go | 716 | 7️⃣ 第七 | 356.2% |
| Rust | 734 | 8️⃣ 第八 | 365.2% |
| Dart (JIT) | 752 | 9️⃣ 第九 | 374.1% |
| Zig | 765 | 🔟 第十 | 380.6% |
| JavaScript (Node.js) | 802 | 1️⃣1️⃣ | 399.0% |
| Lua (LuaJIT) | 850 | 1️⃣2️⃣ | 422.9% |
| Python (PyPy) | 1036 | 1️⃣3️⃣ | 515.4% |
| Dart (AOT) | 3262 | 1️⃣4️⃣ | 1623.4% |

### 🌳 二叉树遍历性能排名

| 语言 | 时间 (ms) | 性能排名 | 相对性能 |
|------|-----------|----------|----------|
| Java (JVM) | 47 | 🥇 最快 | 100% |
| Rust | 53 | 🥈 第二 | 112.8% |
| Go | 64 | 🥉 第三 | 136.2% |
| Zig | 64 | 4️⃣ 第四 | 136.2% |
| JavaScript (Bun) | 68 | 5️⃣ 第五 | 144.7% |
| JavaScript (Node.js) | 77 | 6️⃣ 第六 | 163.8% |
| Dart (JIT) | 78 | 7️⃣ 第七 | 165.9% |
| C (Clang) | 78 | 8️⃣ 第八 | 165.9% |
| C (GCC) | 82 | 9️⃣ 第九 | 174.5% |
| Java (GraalVM) | 123 | 🔟 第十 | 261.7% |
| Swift | 144 | 1️⃣1️⃣ | 306.4% |
| Dart (AOT) | 180 | 1️⃣2️⃣ | 383.0% |
| Lua (LuaJIT) | 193 | 1️⃣3️⃣ | 410.6% |
| Python (PyPy) | 348 | 1️⃣4️⃣ | 740.4% |

### 🗃️ 计数排序性能排名

| 语言 | 时间 (ms) | 性能排名 | 相对性能 |
|------|-----------|----------|----------|
| Zig | 350 | 🥇 最快 | 100% |
| C (Clang) | 384 | 🥈 第二 | 109.7% |
| C (GCC) | 388 | 🥉 第三 | 110.9% |
| Rust | 404 | 4️⃣ 第四 | 115.4% |
| Go | 645 | 5️⃣ 第五 | 184.3% |
| Java (JVM) | 699 | 6️⃣ 第六 | 199.7% |
| Swift | 729 | 7️⃣ 第七 | 208.3% |
| Java (GraalVM) | 852 | 8️⃣ 第八 | 243.4% |
| Python (PyPy) | 1451 | 9️⃣ 第九 | 414.6% |
| Dart (AOT) | 1747 | 🔟 第十 | 499.1% |
| Dart (JIT) | 17080 | 1️⃣1️⃣ | 4880.0% |
| Lua (LuaJIT) | 76549 | 1️⃣2️⃣ | 21871.1% |
| JavaScript (Bun) | 99668 | 1️⃣3️⃣ | 28476.6% |

### 🗼 汉诺塔递归性能排名

| 语言 | 时间 (ms) | 性能排名 | 相对性能 |
|------|-----------|----------|----------|
| Java (JVM) | 501 | 🥇 最快 | 100% |
| C (GCC) | 531 | 🥈 第二 | 106.0% |
| C (Clang) | 534 | 🥉 第三 | 106.6% |
| Rust | 535 | 4️⃣ 第四 | 106.8% |
| Zig | 539 | 5️⃣ 第五 | 107.6% |
| Python (PyPy) | 613 | 6️⃣ 第六 | 122.4% |
| Go | 658 | 7️⃣ 第七 | 131.3% |
| Java (GraalVM) | 664 | 8️⃣ 第八 | 132.5% |
| Dart (AOT) | 862 | 9️⃣ 第九 | 172.1% |
| JavaScript (Bun) | 896 | 🔟 第十 | 178.8% |
| JavaScript (Node.js) | 1017 | 1️⃣1️⃣ | 203.0% |
| Lua (LuaJIT) | 1089 | 1️⃣2️⃣ | 217.4% |
| Dart (JIT) | 1362 | 1️⃣3️⃣ | 271.9% |
| Swift | 1577 | 1️⃣4️⃣ | 314.8% |

### 🔢 曼德勃罗集性能排名

| 语言 | 时间 (ms) | 性能排名 | 相对性能 |
|------|-----------|----------|----------|
| C (Clang) | 233 | 🥇 最快 | 100% |
| C (GCC) | 241 | 🥈 第二 | 103.4% |
| Zig | 272 | 🥉 第三 | 116.7% |
| Go | 275 | 4️⃣ 第四 | 118.0% |
| Swift | 278 | 5️⃣ 第五 | 119.3% |
| JavaScript (Node.js) | 281 | 6️⃣ 第六 | 120.6% |
| Java (GraalVM) | 283 | 7️⃣ 第七 | 121.5% |
| Rust | 294 | 8️⃣ 第八 | 126.2% |
| Lua (LuaJIT) | 318 | 9️⃣ 第九 | 136.5% |
| Java (JVM) | 337 | 🔟 第十 | 144.6% |
| JavaScript (Bun) | 349 | 1️⃣1️⃣ | 149.8% |
| Dart (AOT) | 354 | 1️⃣2️⃣ | 151.9% |
| Dart (JIT) | 356 | 1️⃣3️⃣ | 152.8% |
| Python (PyPy) | 520 | 1️⃣4️⃣ | 223.2% |

## 📈 综合分析

### 🏆 各语言优势场景

#### 系统级语言 (C/C++/Rust/Zig)
- **C**: 在大多数测试中表现稳定，特别适合算法密集型任务
- **Rust**: 在内存安全前提下提供接近C的性能
- **Zig**: 新兴语言，性能与C相当，在某些测试中表现突出

#### 现代编译语言
- **Go**: 在素数筛法中夺冠，垃圾回收语言中性能最佳
- **Swift**: 苹果生态系统语言，性能中等偏上
- **Java**: JVM版本在递归算法中表现优异，JIT优化威力显著

#### 动态语言运行时
- **JavaScript**: Bun运行时明显优于Node.js，在多数测试中差距达50-100%
- **Python**: PyPy的JIT优化使其比CPython快5-10倍
- **Lua**: LuaJIT在轻量级脚本语言中性能最佳

#### 新兴语言
- **Dart**: AOT编译版本通常优于JIT版本，但在某些复杂算法中JIT表现更好

### 🎯 性能特点总结

1. **Java JVM 意外强势**: 在多个递归算法测试中夺冠，JIT优化威力显著
2. **系统级语言稳定**: C、Rust、Zig 在各项测试中表现稳定且接近
3. **Go 内存友好**: 在需要大量内存操作的算法中表现优异
4. **JavaScript 运行时差异**: Bun相比Node.js有显著性能提升
5. **JIT优化效果**: PyPy、LuaJIT比对应解释器版本快5-10倍
6. **编译优化重要性**: AOT编译通常比JIT有更好的性能稳定性

### 🛠️ 运行测试

```bash
# 运行全部测试
./run_bench

# 单独运行某项测试 (以fibonacci为例)
zig run run_bench.zig -- fib
```

### 注意事项
- 所有测试均在相同硬件环境下运行
- 使用各语言的最优化编译选项
- 测试结果可能因系统配置而有所差异
- 某些语言在特定测试中可能因内存限制导致失败